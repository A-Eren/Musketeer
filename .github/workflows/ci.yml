name: ci
on:
  push:
  pull_request:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install tools
        run: |
          sudo apt-get update
          sudo apt-get install -y verilator iverilog
      - name: Verilator lint
        run: verilator --lint-only -Wall -sv packages/riscv_pkg.sv rtl/ALU.sv
      - name: Icarus sim
        run: |
          iverilog -g2012 -o build/alu_tb packages/riscv_pkg.sv rtl/ALU.sv tb/ALU_tb.sv
          vvp build/alu_tb
